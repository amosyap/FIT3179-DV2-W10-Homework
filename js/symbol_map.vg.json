{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 1400,
    "height": 500,
    "title": {
        "text": "Malaysia: Vehicle Registration vs Environmental Complaints by State (2019)",
        "anchor": "middle",
        "fontSize": 24
        },
    "projection": {
        "type": "mercator",
        "center": [109, 4],
        "scale": 3500,
        "translate": [675, 250]
    },
    "layer": [
        {
        "data": {
            "url": "https://raw.githubusercontent.com/amosyap/FIT3179-DV2-W10-Homework/refs/heads/main/js/ne_10m.topojson",
            "format": {
                "type": "topojson",
                "feature": "ne_10m_admin_1_states_provinces"
                }
            },
        "mark": {
            "type": "geoshape",
            "fill": "lightgray",
            "stroke": "white"
        }
        },
        {
            "data": {"graticule": true},
            "mark": {"type": "geoshape", "fill": null, "stroke": "#ddd"}
        },
        {
        "data": {
            "url": "https://raw.githubusercontent.com/amosyap/FIT3179-DV2-W10-Homework/refs/heads/main/data/DV2_Dataset.csv"
        },
        "mark": {
            "type": "circle",
            "opacity": 0.8,
            "stroke": "black",
            "strokeWidth": 1,
            "tooltip": {"content": "data"}
        },
        "encoding": {
            "longitude": {
                "field": "longitude",
                "type": "quantitative"
            },
            "latitude": {
                "field": "latitude",
                "type": "quantitative"
            },
            "size": {
                "field": "registered_motor_cars",
                "type": "quantitative",
                "title": "Registered Motor Cars",
                "scale": {
                    "type": "sqrt",
                    "range": [100, 2500],
                    "domain": [100000, 6500000]
                },
                "legend": {
                        "orient": "none",        
                        "legendX": 500,         
                        "legendY": 50,         
                        "direction": "vertical",
                        "title": "Complaints"
                }
            },
            "color": {
                "field": "number_of_complaints",
                "type": "quantitative",
                "title": "Environmental Complaints",
                "scale": {
                    "type": "threshold",
                    "domain": [1000, 2000, 3000],
                    "range": ["#fee5d9", "#fcae91", "#fb6a4a", "#cb181d"]
                },
                "legend": {
                    "orient": "none",        
                    "legendX": 700,         
                    "legendY": 50,         
                    "direction": "vertical",
                    "title": "Complaints"
                }
            },
            "tooltip": [
            {"field": "state", "type": "nominal", "title": "State"},
            {"field": "registered_motor_cars", "type": "quantitative", "title": "Registered Vehicles", "format": ","},
            {"field": "number_of_complaints", "type": "quantitative", "title": "Environmental Complaints"},
            {"field": "state_population", "type": "quantitative", "title": "Population", "format": ","},
            {"field": "complaints_per_10k_residents", "type": "quantitative", "title": "Complaints per 10,000 pop.", "format": ".1f"},
            {"field": "vehicles_per_1k_residents", "type": "quantitative", "title": "Vehicles per 1,000 pop.", "format": ".1f"}
            ]
        }
        },
        {
        "data": {
            "url": "https://raw.githubusercontent.com/amosyap/FIT3179-DV2-W10-Homework/refs/heads/main/data/DV2_Dataset.csv",
            "format": {"type": "csv"}
        },
        "mark": {
            "type": "text",
            "align": "center",
            "baseline": "middle",
            "fontSize": 12,
            "fill": "black"
        },
        "encoding": {
            "longitude": {"field": "longitude", "type": "quantitative"},
            "latitude": {"field": "latitude", "type": "quantitative"},
            "text": {"field": "state", "type": "nominal"}
        }
        }
    ],
    "config": {
        "view": {"stroke": "transparent"}
    }
    }
